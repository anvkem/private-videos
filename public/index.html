<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Private Access</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="login-container">
    <h1 id="question">Enter your username</h1>

    <input id="username" placeholder="Username">
    <input id="password" placeholder="Answer" type="password">

    <label class="toggle">
      <input type="checkbox" id="togglePassword"> Show password
    </label>

    <button id="loginBtn">Enter</button>
    <p id="error" class="error"></p>
  </div>

  <script>
    const users = {
      "vay": {
        password: "me",
        question: "who are you"
      },
      "jack": {
        password: "can i take multiple pictures of the fan",
        question: "What is the iconic line you said when you sleepwalked the first time?"
      },
      "amy": {
        password: "red panda",
        question: "What do you look like?"
      }
    };

    const usernameInput = document.getElementById("username");
    const passwordInput = document.getElementById("password");
    const loginBtn = document.getElementById("loginBtn");
    const error = document.getElementById("error");
    const toggle = document.getElementById("togglePassword");
    const question = document.getElementById("question");

    // Update question dynamically
    usernameInput.addEventListener("input", () => {
      const userKey = usernameInput.value.trim().toLowerCase();
      if(users[userKey]){
        question.innerText = users[userKey].question;
      } else {
        question.innerText = "Enter your username";
      }
    });

    // Toggle password visibility
    toggle.addEventListener("change", () => {
      passwordInput.type = toggle.checked ? "text" : "password";
    });

    loginBtn.addEventListener("click", () => {
      // Function to remove ALL spaces and lowercase
function normalize(str) {
  return str.replace(/\s+/g, '').toLowerCase();
}

const username = normalize(usernameInput.value);
const password = normalize(passwordInput.value);

if(users[username] && password === normalize(users[username].password)){
  localStorage.setItem("loggedIn", "yes");
  localStorage.setItem("user", username);
  window.location.href = "videos.html";
} else {
  error.innerText = "Wrong username or answer";
}

      }
    });
  </script>

</body>
</html>
